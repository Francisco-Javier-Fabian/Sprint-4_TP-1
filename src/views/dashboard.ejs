<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
        <script src="https://kit.fontawesome.com/fce8cb2351.js" crossorigin="anonymous"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="/js/deleteHero.js"></script>
        <title>Superheroes</title>
    </head>

    <!-- 
     * tareas Limpiar formulario al crear usuario
     * ver devolucion de los campos de usuarios
     * masaje de error no se puede actualizar o crear Superhero
     * checkear botones de de inicio y lista de superheroes
     * mover las tetas
     * mejorar el front de dashboard
      -->
     
    
    <body class ="bg-slate-800 text-slate-100 font-sans">
        

           <!-- Mostrar mensajes de exito si se ha pasado desde el backend -->

   <% if (typeof successMessage !== "undefined" && successMessage) { %>
    <div id="mensajeExitoso" class="text-lg text-[#008000] bg-[#e0ffe0] text-center m-auto p-3">
        <%= successMessage %>
        <button type="button" onclick="this.parentElement.classList.add('hidden')" class="absolute top-0 right-4">x</button>
    </div>
<% } %>

<!-- Mostrar mensaje de error si se ha pasado desde el backend -->
<% if (typeof errorMessage !== "undefined" && errorMessage) { %>
    <div id="mensajeExitoso" class="text-lg text-[#ff0000] bg-[#ffe0e0] text-center m-auto p-3">
        <%= errorMessage %>
        <button type="button" onclick="this.parentElement.classList.add('hidden')" class="absolute top-0 right-4">x</button>
    </div>
<% } %>
<h2 class="text-white font-sans text-center my-7 text-3xl">Lista de Superheroes</h2>

        <div class="flex justify-between m-6 items-center"> 
      

            <!-- boton de crear superheroe  -->
    <!-- <button type="button" onclick="window.location.href='/api/view/agregar'" class="block border-2 h-fit p-3 mt-10 text-white bg-none hover:bg-blue-500 hover:cursor-pointer focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-lg focus:outline-none" onclick="console.log('Botón presionado');">Crear Superheroe</button></div> -->
         
   <table> 
    <thead>
        <tr>
            <th class="border-2">Superheroes:</th>
            <th class="border-2">Nombre Real:</th>
            <th class="border-2">Edad:</th>
            <th class="border-2">Planeta de Origen:</th>
            <th class="border-2">Debilidad:</th>
            <th class="border-2">Poderes:</th>
            <th class="border-2">Aliados:</th>
            <th class="border-2">Enemigos:</th>
            <th class="border-2">Creador:</th>
            <th class="border-2">Acciones:</th>
        </tr>
    </thead>
    <tbody>
        <% superheroes.forEach(superheroe => { %>
            <tr>
            <td class="border-2 px-10"><%= superheroe.nombreSuperHeroe %></td>
            <td class="border-2 px-10"><%= superheroe.nombreReal %></td>
            <td class="border-2 px-10"><%= superheroe.edad %></td>
            <td class="border-2 px-10"><%= superheroe.planetaOrigen %></td>
            <td class="border-2 px-10"><%= superheroe.debilidad %></td>
            <td class="border-2 px-5">
                <% superheroe.poderes.forEach(poder => { %>
                   <li class="list-disc marker:text-gray-600"><%= poder %></li>
                <% }) %>
            </td>
            <td class="border-2 px-5">
                <% superheroe.aliados.forEach(aliado => { %>
                    <li class="list-disc marker:text-gray-600"><%= aliado %></li>
                <% }) %>
            </td>
            <td class="border-2 px-5">
                <% superheroe.enemigos.forEach(enemigo => { %>
                    <li class="list-disc marker:text-gray-800"><%= enemigo %></li>
                <% }) %>
            </td>
            <td class="border-2 px-10"><%= superheroe.creador %></td>
            <td class="flex flex-col gap-3 border-2 p-2">
                <button type="button" onclick="window.location.href='/api/view/editar/<%= superheroe._id %>'" class="block p-4 h-fit border-2 text-gray-50 bg-none hover:bg-emerald-400 hover:cursor-pointer focus:ring-4 focus:ring-orange-300 font-medium rounded-lg text-lg focus:outline-none" onclick="console.log('Botón presionado');"><i class="fa-solid fa-pen-to-square"></i></button>
                <br>
                <br>
                <button type="button" onclick="eliminarSuperheroe('<%= superheroe._id %>')" class="block p-4 h-fit border-2 text-gray-50 bg-none hover:bg-emerald-400 hover:cursor-pointer focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-lg focus:outline-none" onclick="console.log('Botón presionado');"><i class="fa-solid fa-trash"></i></button>
            </td>
            </tr>
        <%})%>
    </tbody>
</table>

</body>
</html>